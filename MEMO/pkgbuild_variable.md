# PKGBUILDの変数

PKGBUILD全体のまとめに書いていたら量がとても多かったので分離した。

[PKGBUILDの記事](https://wiki.archlinux.jp/index.php/PKGBUILD)はここ

PKGBUILDには多くの変数があるが必ず設定しなければならないのは `pkgname`,`pkgver`,`pkgrel`,`arch`の4個である。
`license`はなくてもビルドできるが警告が出るため他人と共有するようなPKGBUILDには書くことが推奨されている。

- pkgname
    - pkgnameはソースのtarballの名前と一致させるべきである。
    - 例えばソースが\<name\>-\<version\>.tar.gzならばpkgnameは\<name\>と一致させるべき。

- pkgver
    - もしバージョンが*0.99-10*のようにハイフンで区切られている場合は*0.99_10*のようにアンダーバーに置き換えなければならない。

- pkgrel
    - Arch Linuxにおけるパッケージのリリース番号でパッケージの同じバージョンを続けてビルドするときにそれを区別するためにこの値を使う。
    - リリース番号は1からスタートして修正・最適が行われるたびにパッケージは再リリースされてリリース番号は1づつ増やされる。

- pkgdesc
    - パッケージの説明でアプリケーションの名前がパッケージ名と異なる場合を除いて、パッケージ名を自己参照しないようにしなければならない

- arch
    - PKGBUILDがビルド・動作するアーキテクチャの文字列で`i686`,`x86_64`が使用可能である。
    - シェルスクリプトのようなアーキテクチャに依存しない場合では`any`を使うことが推奨されている。

- url
    - パッケージされるソフトウェアの公式サイトのURL

- license
    - ソフトウェアのライセンス

- groups
    - パッケージが属するグループ
    - 例えばはplasmaをパッケージのグループであり、これをインストールするとそのグループの属する全てのパッケージがインストールされる。

- depends
    - ソフトウェアを実行する前にインストールする必要のあるパッケージ
    - ソフトウェアの依存パッケージに最低必要バージョンがあるときは、`>=`演算子を用いて表現する。

例
```bash
depends=('foobar>=1.8.0')
```
- optdepends
    - パッケージを機能させるのに必ずしも必要ではないが、機能を追加することができるパッケージの名前

- makedepends
    - ビルドを実行するためには必要ではあるが、ビルド後は必要ないパッケージ名
    - `depends`と同じフォーマットを使って記述する。

- checkdepends
    - テストを実行するのには必要ではあるが、実行時には必要のないパッケージの名前
    - `depends`と同じフォーマットで記述する。
    - check()関数がmakepkgによって実行される時にだけこの依存関係が考慮される。

- provides
    - あるパッケージの機能を別の名前で提供するパッケージの名前。
    - 同じものを(別の名前で)提供するパッケージは互いに衝突しない限り同時にインストールが可能。
    - ただし、特定のバージョンによって影響を受ける依存関係がある場合はパッケージが提供するバージョン(pkgver, pkgrel)を追加せよ。
    - 例えばqtにモディファイを加えてqt-foobarのバージョン3.38を作成する場合では`provedes`に`provides=('qt=3.38')`とする。
    - `provides=('qt')`とするとqtの特定バージョンを必要とする依存関係が破壊されてしまう。
    - 特に`provides`の行に`pkgname`を加えると自動で追加されてしまうので加えてはいけない。

- conflicts
    - インストールすると問題が生じるパッケージの名前
    - この名前を持つパッケージとこの名前の

- replaces
    - パッケージによって置き換えられる廃止パッケージの名前 
    - たとえばwiresharkが廃止パッケージとなってwireshark-qtパッケージが代替となる場合は
    - `replaces=('wireshark')`とする。リポジトリ内に`replaces`に一致するパッケージが現れるとインストールされたパッケージは置き換えられる。
    - 既存パッケージの別バージョンを提供するときには、衝突するパッケージをインストールするときに評価される配列変数`conflicts`, `provides`を使う。

